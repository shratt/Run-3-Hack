(async()=>{async function loadScript(src){eval(await fetch(src).then((e=>e.text())))}await loadScript("https://flyover.github.io/imgui-js/dist/imgui.umd.js"),await loadScript("https://flyover.github.io/imgui-js/dist/imgui_impl.umd.js");let zamn={moduleSystem:{modules:{},registerModule:function(e,t,n){let u={name:e,enabled:!1,enable:(...e)=>{t(...e),u.enabled=!0},disable:(...e)=>{n(...e),u.enabled=!1},toggle:(...e)=>{!0===u.enabled?u.disable(...e):u.enable(...e)}};return zamn.moduleSystem.modules[e]=u,zamn.moduleSystem.modules[e]},deleteModule:function(e){zamn.moduleSystem.modules[e].disable(),delete zamn.moduleSystem.modules[e]},getEnabledModules:function(){let e=[];return Object.keys(zamn.moduleSystem.modules).forEach((t=>{zamn.moduleSystem.modules[t].enabled&&e.push(t)})),e}},utils:{hookUtil:function(e,t,n){let u=e[t];e[t]=function(){return n(this),e[t]=u,u.apply(this,arguments)}},lockValue:function(e,t,n){e.__defineGetter__(t,(()=>n)),e.__defineSetter__(t,(e=>{}))},unlockValue:function(e,t){Object.defineProperty(e,t,{value:null,writable:!0,configurable:!0,enumerable:!0})}}};function hookGame(){let e=Symbol();Object.prototype.__defineSetter__(e,(function(e){window.run3FuncMap=this,this.ApplicationMain=e}));let t=_0x56ae;_0x56ae=function(n){let u=t.apply(this,arguments);return u.includes("ApplicationMain")?(_0x56ae=t,e):u},document.querySelector("canvas").remove(),lime.embed("Run3","openfl-content",window.innerWidth,window.innerHeight,{parameters:{}})}hookGame();let showMenu=!0;zamn.moduleSystem.registerModule("Air Jump",(()=>{zamn.utils.hookUtil(run3FuncMap["unitsystem.action.platformer.JumpAction"].prototype,"update",(e=>{e.jumpsAllowed=1/0}))}),(()=>{zamn.utils.hookUtil(run3FuncMap["unitsystem.action.platformer.JumpAction"].prototype,"update",(e=>{e.jumpsAllowed=1}))})),zamn.moduleSystem.registerModule("Low Gravity",(()=>{zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){e.gravity.y=250,e.gravity3D.y=250}))}),(()=>{zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){e.gravity.y=422,e.gravity3D.y=422}))})),zamn.moduleSystem.registerModule("First Person",(()=>{zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){zamn.utils.lockValue(e.currentCameraOffset,"y",0),zamn.utils.lockValue(e.currentCameraOffset,"z",0)}))}),(()=>{zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){zamn.utils.unlockValue(e.currentCameraOffset,"y"),zamn.utils.unlockValue(e.currentCameraOffset,"z")}))})),zamn.moduleSystem.registerModule("Shrink",(()=>{zamn.utils.hookUtil(run3FuncMap["unitsystem.action.platformer.JumpAction"].prototype,"update",(e=>{zamn.utils.lockValue(e.owner.mesh,"_scaleX",.05),zamn.utils.lockValue(e.owner.mesh,"_scaleY",.05)})),zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){zamn.utils.lockValue(e.currentCameraOffset,"y",-5),zamn.utils.lockValue(e.currentCameraOffset,"z",-22),console.log(e.currentCameraOffset.z,e.currentCameraOffset.y)}))}),(()=>{zamn.utils.hookUtil(run3FuncMap["unitsystem.action.platformer.JumpAction"].prototype,"update",(e=>{zamn.utils.lockValue(e.owner.mesh,"_scaleX",1),zamn.utils.lockValue(e.owner.mesh,"_scaleY",1)})),zamn.utils.hookUtil(run3FuncMap["nme3D.physics.World3D"].prototype,"update",(function(e){zamn.utils.unlockValue(e.currentCameraOffset,"y"),zamn.utils.unlockValue(e.currentCameraOffset,"z")}))})),window.initGUI=async function(){await ImGui.default();let e=document.querySelector("#openfl-content > canvas");window.addEventListener("resize",(()=>{e.width=window.innerWidth,e.height=window.innerHeight,hookGame(),window.initGUI()})),ImGui.CreateContext(),ImGui_Impl.Init(e),ImGui.StyleColorsDark();window.requestAnimationFrame((function e(t){ImGui_Impl.NewFrame(t),ImGui.NewFrame(),showMenu&&(ImGui.PushStyleColor(ImGui.ImGuiCol.TitleBg,new ImGui.ImVec4(0,.5,.5,.9)),ImGui.PushStyleColor(ImGui.ImGuiCol.TitleBgActive,new ImGui.ImVec4(0,.6,.6,.9)),ImGui.PushStyleColor(ImGui.ImGuiCol.ButtonActive,new ImGui.ImVec4(0,.5,.5,.9)),ImGui.Begin("ZAMN"),Object.values(zamn.moduleSystem.modules).forEach((e=>{e.enabled?(ImGui.PushStyleColor(ImGui.ImGuiCol.Button,new ImGui.ImVec4(.4,.4,.4,.9)),ImGui.PushStyleColor(ImGui.ImGuiCol.ButtonHovered,new ImGui.ImVec4(.3,.3,.3,.9))):(ImGui.PushStyleColor(ImGui.ImGuiCol.Button,new ImGui.ImVec4(.2,.2,.2,.8)),ImGui.PushStyleColor(ImGui.ImGuiCol.ButtonHovered,new ImGui.ImVec4(.4,.4,.4,.9))),ImGui.Button(e.name,new ImGui.ImVec2(ImGui.GetContentRegionAvail().x,0))&&e.toggle()})),ImGui.End());ImGui.EndFrame(),ImGui.Render(),ImGui_Impl.RenderDrawData(ImGui.GetDrawData()),window.requestAnimationFrame(e)}))},initGUI(),window.addEventListener("keydown",(e=>{"ShiftLeft"===e.code&&(showMenu=!showMenu)}))})();
